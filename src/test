
const resource = await select({
	message: 'Select a package manager',
	  choices: [
		{
		label: 'List Accounts',
		value: '/accounts'
		},
		{
		label: 'Cancel Orders',
		value: '/orders/batch_cancel'
		},
		{
		label: 'List Orders',
		value: '/orders/historical/batch'
		},
		{
		label: 'List Fills',
		value: '/orders/historical/fills'
		},
		{
		label: 'Get Best Bid/Ask',
		value: '/best_bid_ask'
		},
		{
		label: 'Get Product Book',
		value: '/product_book'
		},
		{
		label: 'List Products',
		value: '/products'
		},
		{
		label: 'Get Tran-sactions Summary',
		value: '/transaction_summary'
		}
	],
});

var apiKey = '2q7DfBj1Gcik5lBE';
var apiSecret = 'ArtDbY362yWeW35whuXNeQzYC5nunFTW';

var timestamp = Math.floor(Date.now() / 1000);

var req = {
    method: 'GET',
    path: '/api/v3/brokerage/' + resource,
    body: ''
};

var message = timestamp + req.method + req.path + req.body;

//var signature = CryptoJS.hmacsha256("sha256", apiSecret)
var signature = crypto.createHmac("sha256", apiSecret).update(message).digest("hex");

var options = {
    baseUrl: 'https://api.coinbase.com/',
    url: req.path,
    method: req.method,
    headers: {
        'CB-ACCESS-SIGN': signature,
        'CB-ACCESS-TIMESTAMP': timestamp,
        'CB-ACCESS-KEY': apiKey,
        'CB-VERSION': '2015-07-22'
    }
};

request(options,function(err, response){
    if (err) console.log(err);
    console.log(response.body);
});

